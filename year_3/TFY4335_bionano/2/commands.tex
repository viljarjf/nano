\makeatletter
\usepackage{ifthen}

%\renewcommand{\vec}{\vv}
\renewcommand{\vec}[1]{\ensuremath{\mathbf{#1}}}
\renewcommand{\phi}{\varphi}
\newcommand*{\defeq}{\stackrel{\text{def}}{=}}

% vector shortcuts
\newcommand{\E}{\ensuremath{\vec{E}}}
\renewcommand{\epsilon}{\varepsilon}
\newcommand{\e}{\ensuremath{\epsilon_0}}
\newcommand{\p}{\ensuremath{\vec{P}}}
\newcommand{\D}{\ensuremath{\vec{D}}}
\renewcommand{\j}{\ensuremath{\vec{J}}}
\newcommand{\B}{\ensuremath{\vec{B}}}
\renewcommand{\H}{\ensuremath{\vec{H}}}

\newcommand{\pde}[3][1]{
  \ifthenelse{\equal{#1}{1}}
    {\frac{\partial #2}{\partial #3}}
    {\frac{\partial^{#1} #2}{\partial #3^{#1}}}
}

% add equation numbering to align*
\newcommand\numberthis{\addtocounter{equation}{1}\tag{\theequation}}

% pasta from https://tex.stackexchange.com/questions/459167/typesetting-dalembertian-symbol?rq=1
\newcommand{\dalambert}{\mathop{\mathpalette\dalembertian@\relax}}
\newcommand{\dalembertian@}[2]{%
  \begingroup
  \sbox\z@{$\m@th#1\square$}%
  \dimen0=\fontdimen8
    \ifx#1\displaystyle\textfont\else
    \ifx#1\textstyle\textfont\else
    \ifx#1\scriptstyle\scriptfont\else
    \scriptscriptfont\fi\fi\fi3
  \makebox[\wd\z@]{%
    \hbox to \ht\z@{%
      \vrule width \dimen0
      \kern-\dimen0
      \vbox to \ht\z@{
        \hrule height \dimen0 width \ht\z@
        \vss
        \hrule height 2\dimen0
      }%
      \kern-2.5\dimen0
      \vrule width 2.5\dimen0
    }%
  }%
  \endgroup
}

\let\tmp\hat
\renewcommand{\hat}[1]{\vec{\tmp{#1}}}

%\renewcommand{\nabla}{\text{aruran}}

\makeatother